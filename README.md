# 主义主义模拟器 (Ism Simulator)

## 1. 项目愿景

本项目是一个雄心勃勃的模拟器，旨在程序化地生成具有复杂内心世界的非玩家角色（NPC），并观察他们在动态世界中的互动与演化。其核心是基于一个包含超过380种“主义”的哲学框架，为每个NPC赋予独特的意识形态、需求和欲望，从而驱动他们做出不可预测但又合乎逻辑的行为。

我们的目标不是创造一个传统意义上的“游戏”，而是一个“人工社会”的实验室，一个可以涌现出复杂社会现象（如思想传播、集体行动、文化冲突）的数字培养皿。

---

## 2. 核心架构：逻辑与表现分离

为了实现这一宏大目标，项目采用了一种现代化、高性能的架构，将**模拟逻辑**与**视觉表现**完全分离。

![Architecture Diagram](https://i.imgur.com/your-diagram-image-url.png)  _（这是一个占位符，未来可以替换为真实的架构图）_

### 🔹 `world_server` - 世界的大脑 (The Brain)

这是整个模拟的核心，一个用 Python 编写的纯逻辑引擎。

-   **职责**:
    -   管理所有NPC（实体）的状态。
    -   运行所有驱动世界演化的系统（AI决策、需求变化、物理移动等）。
    -   处理资源、经济和环境的变化。
-   **技术核心**: **实体-组件-系统 (Entity-Component-System, ECS)**
    -   **实体 (Entity)**: 一个简单的ID，代表世界中的一个事物（如一个NPC）。
    -   **组件 (Component)**: 纯粹的数据容器，描述实体的某个方面（如 `PositionComponent` 存储位置，`NeedsComponent` 存储需求）。
    -   **系统 (System)**: 纯粹的逻辑，对拥有特定组件的实体进行操作（如 `MovementSystem` 只负责移动，`InteractionSystem` 只负责社交）。
-   **优势**: 这种ECS架构提供了极致的灵活性和可扩展性。想让NPC学会飞？只需添加一个 `FlightComponent` 和 `FlightSystem` 即可，无需改动任何现有代码。这为未来实现生育、学习、组织创建等复杂功能奠定了坚实的基础。

### 🔹 `godot_visualizer` - 世界的脸面 (The Face)

这是一个用 Godot 引擎构建的客户端，作为世界的视觉表现层。

-   **职责**:
    -   通过 WebSocket 连接到 `world_server`。
    -   接收服务器广播的世界状态（如每个NPC的位置、当前动作）。
    -   将数据渲染成玩家可以看到的图形界面。
-   **优势**: 将渲染与逻辑分离，使得两边可以独立开发和优化。逻辑开发者可以专注于复杂的AI算法，而不用担心对游戏帧率的影响；视觉开发者则可以专注于创造美观的画面，而不需要理解背后复杂的模拟机制。

> **重要提示**: 对于最终用户来说，这是一个**单机游戏**。在运行时，"大脑"和"脸面"会在用户的电脑上同时启动并在本地通信，提供无缝的单机体验。

---

## 3. 如何运行

### 依赖安装
在启动前，请确保已安装Python的 `websockets` 库：
```bash
pip install websockets
```

### 步骤
1.  **启动世界服务器 (大脑)**
    在项目根目录下打开一个终端，运行：
    ```bash
    python -u world_server/server.py
    ```
    您应该会看到服务器启动、加载数据并开始监听 `ws://localhost:8765` 的日志。

2.  **启动Godot可视化工具 (脸面)**
    -   使用Godot游戏引擎打开 `godot_visualizer` 目录下的项目。
    -   运行Godot项目。它将自动尝试连接到本地运行的服务器。

3.  **观察！**
    如果一切顺利，您将在Godot窗口中看到NPC们开始根据其内在逻辑移动、互动和生活。

---

## 4. 项目结构

```
.
├── generated_npcs_final/   # 存放程序生成的NPC数据文件 (.json)
├── godot_visualizer/       # Godot前端项目
└── world_server/           # Python后端模拟器
    ├── ecs/                # ECS框架核心
    │   ├── components/     # 所有组件的定义
    │   └── systems/        # 所有系统的定义
    ├── interactions.json   # 定义了所有可能的社交互动
    ├── locations.json      # 定义了世界中的所有地点
    ├── resource_manager.py # 管理全局资源的静态类
    └── server.py           # 服务器主入口和WebSocket逻辑
```

---

## 5. 未来方向

得益于全新的ECS架构，以下激动人心的功能成为了可能：
-   **生育与成长系统**: 动态地创造拥有“遗传”特性的新NPC。
-   **动态事件系统**: 基于世界状态触发全局性事件（如饥荒、战争、节日）。
-   **组织与集体行为**: NPC可以自发形成拥有共同目标的组织（如学派、公会、反抗军）。
-   **更复杂的经济与资源链**: 建立起完整的生产、消费和贸易循环。

欢迎您一同探索这个世界的无限可能！